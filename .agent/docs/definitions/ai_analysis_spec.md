# LLM 이미지 분석 규격 (AI Image Analysis)

## 1. 목적
추출된 이미지의 맥락 정보를 파악하여 마크다운 문서의 품질을 고도화하고, 시각 장애인을 위한 대체 텍스트(Alt Text) 및 상세 설명을 자동으로 생성합니다.

## 2. 연동 규격

### 2.1 모델 및 API
- **대상 모델**: Claude 3.5 Sonnet (Vision), GPT-4o
- **프로토콜**: REST API (HTTPS)

### 2.2 입력 정보
- **Image Data**: Base64 인코딩된 이미지 스트림 또는 로컬 파일 경로.
- **System Prompt**: "해당 이미지의 내용을 분석하여 마크다운의 설명(Caption)으로 적합한 짧은 요약과 상세 내용을 반환하라."

### 2.3 출력 형식
```json
{
  "summary": "이미지에 대한 짧은 요약",
  "detail": "이미지의 텍스트, 차트 데이터, 상황 설명 등을 포함한 상세 내용",
  "ocr_text": "이미지 내부에서 감지된 텍스트 전체"
}
```

## 3. 마크다운 삽입 방식
- **기본형**: `![{summary}]({image_path})`
- **확장형**: 
  이미지 링크 하단에 마크다운 인용구(`>`)를 사용하여 AI 분석 내용을 삽입.
  ```markdown
  ![요약](path/to/img.png)
  > **AI 분석**: {detail}
  ```

---

## 4. 비용 최적화 전략
1. 동일한 해시(Hash)를 가진 이미지는 재분석하지 않고 캐시(Cache) 데이터 사용.
2. 사용자가 분석 여부를 선택할 수 있도록 옵션(Flag) 제공.
